<!DOCTYPE html>
<!-- saved from url=(0055)./02_program_structure.html -->
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <meta charset="utf-8">
  <title>Program Structure :: Eloquent JavaScript</title>
  <link rel="stylesheet" href="./media/codemirror.css">
  <script src="./media/acorn_codemirror.js"></script>
  <link rel="stylesheet" href="./media/ejs.css">
  <script src="./media/sandbox.js"></script>
  <script src="./media/ejs.js"></script>
  <script>var chapNum = 2;</script>
</head>

<body><article>
<nav>
  <a href="./01_values.html" title="previous chapter">◀</a>
  <a href="./index.html" title="cover">◆</a>
  <a href="./03_functions.html" title="next chapter">▶</a>
</nav>

<h1><div class="chap_num">Глава 2</div>Структура на програма</h1>
<blockquote>
<p><a class="p_ident" id="p_J/zCYrllfQ" href="./02_program_structure.html#p_J/zCYrllfQ"></a>И сърцето ми свети ярко червено обвито в мъглата на полупрозрачна обвивка, трябва да ме водят в JavaScript, за да мога да се върна. (Аз реагирам добре на токсини в кръвта.) Човече, тези неща, са като удар право в моите топки!”</p>
 <footer>_why, <cite>Why's (Poignant) Guide to Ruby</cite></footer>
</blockquote>
<p><a class="p_ident" id="p_x4mfX9d1CF" href="./02_program_structure.html#p_x4mfX9d1CF"></a>В тази глава, ще започнем да правим неща, които действително могат да бъдат наречени програмиране. Ние ще разширим нашето владение на езика JavaScript отвъд съществителните и изреченията-фрагменти, които сме виждали до момента, до точката, където ще можем да изразим някаква смислена проза.</p>
<h2><a class="h_ident" id="h_5fUOQZwwHx" href="./02_program_structure.html#h_5fUOQZwwHx"></a>Expressions and statements
(Изрази  и  твърдения)
</h2>
<p><a class="p_ident" id="p_EuyWCUdM/0" href="./02_program_structure.html#p_EuyWCUdM/0"></a>В
<a href="./01_values.html#values">Глава 1</a> създадохме някои стойности и след това приложихме оператори върху тях, за да получим нови стойности. Създаване на стойности, като че ли е съществена част от всяка програма на JavaScript,  но това е само една част.</p>
<p><a class="p_ident" id="p_8CCep1TQ8b" href="./02_program_structure.html#p_8CCep1TQ8b"></a>Фрагмент от код, който произвежда стойност се нарича <em>expression</em> (израз). Всяка стойност, която е написана буквално като <code>22</code> или <code>"psychoanalysis"</code>) е израз. <em>Expression</em> в скоби е израз, който е бинарен оператор, когато се прилага към два израза или унарен оператор, когато се прилага към един израз.</p>
<p><a class="p_ident" id="p_QXQG3kVSFh" href="./02_program_structure.html#p_QXQG3kVSFh"></a>Това показва част от красотата на интерфейса на базовия език. <em>Expression</em> могат да се влагат по начин, много подобен на начина, по който изразите в човешката реч са вложени, изразите могат да съдържат собствени под-изрази и т.н. Това ни позволява да комбинираме изрази, за да правим произволно сложни изчисления.</p>
<p><a class="p_ident" id="p_K6OJ6JuFaH" href="./02_program_structure.html#p_K6OJ6JuFaH"></a>Ако израз съответства на фрагмент от изречение, то твърдението <em>statement</em> на  JavaScript съответства напълно на изречение в човешката реч. Програмата е просто списък с твърдения.</p>
<p><a class="p_ident" id="p_NAzxo1M6WC" href="./02_program_structure.html#p_NAzxo1M6WC"></a>Най простия пример на <em>statements</em> е <em>expression</em> (израз) с точка и запетая след него:</p>
<pre data-language="javascript" class="snippet cm-s-default"><div class="sandboxhint">edit &amp; run code by clicking it</div><a class="c_ident" id="c_ShAmL4Xddd" href="./02_program_structure.html#c_ShAmL4Xddd"></a><span class="cm-number">1</span>;
<span class="cm-operator">!</span><span class="cm-atom">false</span>;</pre>
<p><a class="p_ident" id="p_dj4UvUmws0" href="./02_program_structure.html#p_dj4UvUmws0"></a>Това е безполезна програма, все пак. Израза (<em>expression</em>) може само да даде стойност, която след това може да се използва от обвиващия го израз. Твърдението (<em>statements</em>) може да стои самостоятелно и има значение само ако това се отразява на околната среда. То може да покаже нещо на екрана - това се смята за промяна на средата или да промени вътрешното състояние на машината по начин, който ще се отрази на твърденията, които идват след него. Тези промени се наричат странични ефекти (<em>side effects</em>). Твърденията в предишните примери просто произвеждат стойностите <code>1</code> или <code>true</code> и веднага след това ги изхвърляме. Техния живот не оставя отпечатък в околната средата изобщо. Когато се изпълнява програмата, нищо не се случва.</p>
<p><a class="p_ident" id="p_neJqLsvK+g" href="./02_program_structure.html#p_neJqLsvK+g"></a>В някои случаи JavaScript ви позволява да пропуснете точката и запетаята в края на твърдението. В други случаи, те трябва да бъдат там или следващия ред ще бъде третиран, като част от същото твърдение. Правилата кога може безопасно да се пропуснат са трудни и пълни с грешки. В тази книга всяко твърдение, което се нуждае от точка и запетая и няма, ще бъде прекратено. Препоръчвам ви да направите същото в собствените си програми, поне докато научите повече тънкости при пропускането на точка и запетая.</p>
<h2><a class="h_ident" id="h_rAGNsfewCX" href="./02_program_structure.html#h_rAGNsfewCX"></a>Променливи</h2>
<p><a class="p_ident" id="p_i0lKsEoj6z" href="./02_program_structure.html#p_i0lKsEoj6z"></a>Как една програма поддържа вътрешния си свят? Как запомня неща? Видяхме как се произвеждат нови стойности от стари стойности, но това не променя старите стойности и новата стойност трябва да ги използва веднага отново иначе ще се изчезне. За да се направи и задържи стойност, JavaScript предвижда нещо, което е наречено променлива.</p>
<pre data-language="javascript" class="snippet cm-s-default"><a class="c_ident" id="c_eDAXp+U+Cr" href="./02_program_structure.html#c_eDAXp+U+Cr"></a><span class="cm-keyword">var</span> <span class="cm-variable">caught</span> <span class="cm-operator">=</span> <span class="cm-number">5</span> <span class="cm-operator">*</span> <span class="cm-number">5</span>;</pre>
<p><a class="p_ident" id="p_Jhk5gi+tgk" href="./02_program_structure.html#p_Jhk5gi+tgk"></a>И това ни дава нашия втори вид твърдение. Специалната ключова дума <code>var</code> показва, че това изречение ще дефинира променлива. <em>Var</em> e последвано от името на променливата и ако искаме незабавно да му дадем стойност, от оператора <code>=</code> и израз.</p>
<p><a class="p_ident" id="p_EkxlfkTaWl" href="./02_program_structure.html#p_EkxlfkTaWl"></a>Предното твърдение създава променливата <code>caught</code> и го използва за да вземе размера на номера, който се произвежда, като се умножи 5*5.</p>
<p><a class="p_ident" id="p_Fh873D6aQC" href="./02_program_structure.html#p_Fh873D6aQC"></a>След това променливата е определена и нейното име може да се използва, като израз. Стойността на такава експресия е стойността на променливата, която съдържа по настоящем. Ето един пример:</p>
<pre data-language="javascript" class="snippet cm-s-default"><a class="c_ident" id="c_v1fZTgCdHj" href="./02_program_structure.html#c_v1fZTgCdHj"></a><span class="cm-keyword">var</span> <span class="cm-variable">ten</span> <span class="cm-operator">=</span> <span class="cm-number">10</span>;
<span class="cm-variable">console</span>.<span class="cm-property">log</span>(<span class="cm-variable">ten</span> <span class="cm-operator">*</span> <span class="cm-variable">ten</span>);
<span class="cm-comment">// → 100</span></pre>
<p><a class="p_ident" id="p_TPVvmRq49D" href="./02_program_structure.html#p_TPVvmRq49D"></a>Името на променливата може да бъде всяка дума, която не е запазена. То не може да включва празни интервали. Цифрите могат да бъдат част от името на променливата - <code>catch22</code> е валидно име, но името не трябва да започва с цифра. Името на променливата не може да включва пунктуация, с изключение на знака <code>$</code> и <code>_</code>.</p>
<p><a class="p_ident" id="p_ew9BThyy9D" href="./02_program_structure.html#p_ew9BThyy9D"></a>Когато променливата има стойност, това не означава, че тя е свързана с тази стойност завинаги. Оператора <code>=</code> може да се използва по всяко време върху съществуващите променливи, като ги изключва от текущата им стойност и ги насочва към нова.</p>
<pre data-language="javascript" class="snippet cm-s-default"><a class="c_ident" id="c_DgDcf/xkZV" href="./02_program_structure.html#c_DgDcf/xkZV"></a><span class="cm-keyword">var</span> <span class="cm-variable">mood</span> <span class="cm-operator">=</span> <span class="cm-string">"light"</span>;
<span class="cm-variable">console</span>.<span class="cm-property">log</span>(<span class="cm-variable">mood</span>);
<span class="cm-comment">// → light</span>
<span class="cm-variable">mood</span> <span class="cm-operator">=</span> <span class="cm-string">"dark"</span>;
<span class="cm-variable">console</span>.<span class="cm-property">log</span>(<span class="cm-variable">mood</span>);
<span class="cm-comment">// → dark</span></pre>
<p><a class="p_ident" id="p_tdX1rrdcPQ" href="./02_program_structure.html#p_tdX1rrdcPQ"></a>Трябва да си представяме променливите повече, като пипала от колкото кутии. Те не съдържат стойности - две променливи могат да се отнасят до една и съща стойност. Една програма може да получи достъп само до стойностите, които те са хванали. Когато имате нужда да си спомните нещо, пипалото пораства и се хваща за него или протяга едно от съществуващите пипала към него.</p>
<div class="image">
  <img src="./media/octopus.jpg" alt="Variables as tentacles">
</div>
<p><a class="p_ident" id="p_bJwHD1AmQW" href="./02_program_structure.html#p_bJwHD1AmQW"></a>Нека разгледаме един пример. За да си спомните, колко долара ви дължи Луиджи, можете да създадете променлива и когато той връща обратно 35$, тази променлива ще ви даде нова стойност.</p>
<pre data-language="javascript" class="snippet cm-s-default"><a class="c_ident" id="c_kgxqlrIFy2" href="./02_program_structure.html#c_kgxqlrIFy2"></a><span class="cm-keyword">var</span> <span class="cm-variable">luigisDebt</span> <span class="cm-operator">=</span> <span class="cm-number">140</span>;
<span class="cm-variable">luigisDebt</span> <span class="cm-operator">=</span> <span class="cm-variable">luigisDebt</span> <span class="cm-operator">-</span> <span class="cm-number">35</span>;
<span class="cm-variable">console</span>.<span class="cm-property">log</span>(<span class="cm-variable">luigisDebt</span>);
<span class="cm-comment">// → 105</span></pre>
<p><a class="p_ident" id="p_Kti5/Q6NH3" href="./02_program_structure.html#p_Kti5/Q6NH3"></a>Когато дефинирате променлива без да и дадете стойност, пипалото нищо няма да разбере и няма да свърши нищо. Ако попитате за стойността на една празна променлива, ще получите <code>undefined</code>.</p>
<p><a class="p_ident" id="p_/AKSyKwnu0" href="./02_program_structure.html#p_/AKSyKwnu0"></a>Един единствен <code>var</code> може да дефинира множество променливи, но те трябва да бъдат разделени със запетая.</p>
<pre data-language="javascript" class="snippet cm-s-default"><a class="c_ident" id="c_3ZOoKK6DZQ" href="./02_program_structure.html#c_3ZOoKK6DZQ"></a><span class="cm-keyword">var</span> <span class="cm-variable">one</span> <span class="cm-operator">=</span> <span class="cm-number">1</span>, <span class="cm-variable">two</span> <span class="cm-operator">=</span> <span class="cm-number">2</span>;
<span class="cm-variable">console</span>.<span class="cm-property">log</span>(<span class="cm-variable">one</span> <span class="cm-operator">+</span> <span class="cm-variable">two</span>);
<span class="cm-comment">// → 3</span></pre>
<h2><a class="h_ident" id="h_ko4pqLOTdI" href="./02_program_structure.html#h_ko4pqLOTdI"></a>Ключови  и  резервирани  думи</h2>
<p><a class="p_ident" id="p_GioEDRc+dl" href="./02_program_structure.html#p_GioEDRc+dl"></a>Думи с особен смисъл, като <code>var</code> са ключови думи и те не могат да се използват за имена на променливи. Има и редица други думи, които са “запазени за употреба” в бъдещите версии на JavaScript. И те са официално забранени за ползване, като имена на променливи, макар че в някои среди на JavaScript го позволява. Пълният списък на ключовите и резервирани думи е дълъг:</p>
<pre data-language="text/plain" class="snippet cm-s-default"><a class="c_ident" id="c_DsAGZZBb8k" href="./02_program_structure.html#c_DsAGZZBb8k"></a>break case catch class const continue debugger
default delete do else enum export extends false
finally for function if implements import in
instanceof interface let new null package private
protected public return static super switch this
throw true try typeof var void while with yield</pre>
<p><a class="p_ident" id="p_0pDQHpgrM3" href="./02_program_structure.html#p_0pDQHpgrM3"></a>Не се притеснявайте ако не ги запомните, но не забравяйте, че това може да бъде проблем ако някоя променлива дефиниция не работи, както се очаква.</p>
<h2><a class="h_ident" id="h_2Tc54fkIgF" href="./02_program_structure.html#h_2Tc54fkIgF"></a>Околна  среда</h2>
<p><a class="p_ident" id="p_tJKFexJV/j" href="./02_program_structure.html#p_tJKFexJV/j"></a>Събирането на променливи и техните стойности, които съществуват в дадения момент се нарича околна среда. Когато една програма се стартира тази среда не е празна. Тя винаги съдържа променливи, които са част от стандарта на езика и в повечето случаи, той има променливи, които осигуряват начини за взаимодействие със заобикалящата система. Така например, в браузъра има променливи и функции, които да запознаят и повлияят на заредения в момента сайт да разпознава мишка и клавиатура за въвеждане.</p>
<h2><a class="h_ident" id="h_K5Yd6h3Axg" href="./02_program_structure.html#h_K5Yd6h3Axg"></a>Функции</h2>
<p><a class="p_ident" id="p_S7KjMy3yAl" href="./02_program_structure.html#p_S7KjMy3yAl"></a>Много от стойностите предвидени в околната среда имат по подразбиране тип на функция. Функцията е част от програма обгърната в стойност. Тези стойности могат да бъдат приложени за да стартираме програма. Така например, в средата на браузър, променливата <code>alert</code> притежава функция, която показва малък диалогов прозорец със съобщение. Тя се използва по следния начин:</p>
<pre data-language="javascript" class="snippet cm-s-default"><a class="c_ident" id="c_/bha8x/lU5" href="./02_program_structure.html#c_/bha8x/lU5"></a><span class="cm-variable">alert</span>(<span class="cm-string">"Good morning!"</span>);</pre>
<div class="image">
  <img src="./media/alert.png" alt="An alert dialog">
</div>
<p><a class="p_ident" id="p_9qu6Ki2/lH" href="./02_program_structure.html#p_9qu6Ki2/lH"></a>Задачата на функцията е да <em>призовава</em>, <em>извиква</em>, или <em>прилага</em>. Може да извикате функция чрез поставяне на скоби след израз, който произвежда стойност функция. Обикновено директно ще използвате името на променливата, която притежава функцията. Стойностите между скобите са дадени на програмата в самата функция. В примера, за <code>alert</code>, функцията използва <em>string</em>, който ние сме дали, тъй като текста се показва в диалоговия прозорец. Зададените стойности на функцията се наричат <em>arguments</em> (аргументи). Функцията <code>alert</code> се нуждае само от един от тях, но други функции може да се нуждаят от различен брой или видове аргументи.</p>
<h2><a class="h_ident" id="h_6+Vb3XQoaa" href="./02_program_structure.html#h_6+Vb3XQoaa"></a>Функцията  console.log</h2>
<p><a class="p_ident" id="p_HDjV1sA8vQ" href="./02_program_structure.html#p_HDjV1sA8vQ"></a>Функцията <code>alert</code> може да бъде полезна като изходно устройство, когато експериментирате, но щракайки по всички онези малки прозорци, ще ви се качи на нервите. При последните примери ние използвахме <code>console.log</code> за изходните стойности. Повечето системи за JavaScript (включително всички съвременни уеб браузъри и Node.js) осигуряват функцията <code>console.log</code>, която пише своите аргументи, като текст на изходно устройство. В браузъра изходното място е в конзолата на JavaScript. Тази част от интерфейса на браузъра е скрита по подразбиране, повечето браузъри го отварят при натискане на  F12 за Windows или на Mac при натискане на Command-Option-I. Ако това не работи търсете по менютата елемент наречен  “web console” или “developer tools”.</p>
<p><a class="p_ident" id="p_bTfrhpuIIt" href="./02_program_structure.html#p_bTfrhpuIIt"></a>Когато използвате примерите или свой собствен код, на страниците на тази книга, <code>console.log</code> ще бъде показан след примера, вместо на JavaScript конзолата на браузъра.</p>
<pre data-language="javascript" class="snippet cm-s-default"><a class="c_ident" id="c_X1fO5elRqd" href="./02_program_structure.html#c_X1fO5elRqd"></a><span class="cm-keyword">var</span> <span class="cm-variable">x</span> <span class="cm-operator">=</span> <span class="cm-number">30</span>;
<span class="cm-variable">console</span>.<span class="cm-property">log</span>(<span class="cm-string">"the value of x is"</span>, <span class="cm-variable">x</span>);
<span class="cm-comment">// → the value of x is 30</span></pre>
<p><a class="p_ident" id="p_lKC7MRhfz2" href="./02_program_structure.html#p_lKC7MRhfz2"></a>Въпреки, че имената на променливите не могат да съдържат точки очевидно има една. Това е така защото <code>console.log</code> не е обикновена променлива. Всъщност това е израз, който извлича <code>log</code> от стойността на 
<code>console</code>променливата. Ще разберете какво точно означава това в 
<a href="./04_data.html#properties">Глава 4</a>.</p>
<h2 id="return_values"><a class="h_ident" id="h_nULi9znEdr" href="./02_program_structure.html#h_nULi9znEdr"></a>Стойности  за  връщане</h2>
<p><a class="p_ident" id="p_cJD1JUU5+H" href="./02_program_structure.html#p_cJD1JUU5+H"></a>Показване на диалогов прозорец или писане на текст на екрана е страничен ефект. Много функции са полезни именно поради страничните ефекти, които произвеждат. Функциите могат също да произведат стойности и в този случай не трябва да имат страничен ефект за да бъдат полезни. Например <code>Math.max</code> взема произволен брой цифрови стойности и връща по-голямата.</p>
<pre data-language="javascript" class="snippet cm-s-default"><a class="c_ident" id="c_KDqbDlOaSI" href="./02_program_structure.html#c_KDqbDlOaSI"></a><span class="cm-variable">console</span>.<span class="cm-property">log</span>(<span class="cm-variable">Math</span>.<span class="cm-property">max</span>(<span class="cm-number">2</span>, <span class="cm-number">4</span>));
<span class="cm-comment">// → 4</span></pre>
<p><a class="p_ident" id="p_n4ne85oslE" href="./02_program_structure.html#p_n4ne85oslE"></a>Когато дадена функция произвежда стойност и се казва, да върне (<em>return</em>) тази стойност. Всичко, което произвежда стойност не е израз в JavaScript, което означава, че извикването на функции може да се използва в рамките на по-големи изрази. Тука се извиква Math.min, което е обратното на <code>Math.min</code> и се използва, като допълнение към оператора плюс:</p>
<pre data-language="javascript" class="snippet cm-s-default"><a class="c_ident" id="c_huNtX2skdz" href="./02_program_structure.html#c_huNtX2skdz"></a><span class="cm-variable">console</span>.<span class="cm-property">log</span>(<span class="cm-variable">Math</span>.<span class="cm-property">min</span>(<span class="cm-number">2</span>, <span class="cm-number">4</span>) <span class="cm-operator">+</span> <span class="cm-number">100</span>);
<span class="cm-comment">// → 102</span></pre>
<p><a class="p_ident" id="p_bhFVJn8rDc" href="./02_program_structure.html#p_bhFVJn8rDc"></a><a href="./03_functions.html#functions">Следващата глава</a> обяснява как да пишете свои функции.</p>
<h2><a class="h_ident" id="h_1nddjRgQ5+" href="./02_program_structure.html#h_1nddjRgQ5+"></a>prompt  and  confirm</h2>
<p><a class="p_ident" id="p_tJIGQUSpum" href="./02_program_structure.html#p_tJIGQUSpum"></a>Средата на браузъра поддържа и други функции освен <code>alert</code>, за изкачащи прозорци. Можете питате потребителя за OK/Cancel използвайки <em>confirm</em>. Той връща Булева стойност: <code>true</code> ако потребителя кликне върху OK и <code>false</code> ако потребителя кликне <em>Cancel</em>.</p>
<pre data-language="javascript" class="snippet cm-s-default"><a class="c_ident" id="c_8+qosPEiZf" href="./02_program_structure.html#c_8+qosPEiZf"></a><span class="cm-variable">confirm</span>(<span class="cm-string">"Shall we, then?"</span>);</pre>
<div class="image">
  <img src="./media/confirm.png" alt="A confirm dialog">
</div>
<p><a class="p_ident" id="p_+abQLgqQ+O" href="./02_program_structure.html#p_+abQLgqQ+O"></a>Функцията <code>prompt</code> може да се използва, за да пуснете “отворен” въпрос. Първият аргумент е въпросът, а вторият е текстът, с който потребителя отговаря. Ред от текста може да бъде въведен в диалоговия прозорец и функцията ще го върне като <em>string</em>.</p>
<pre data-language="javascript" class="snippet cm-s-default"><a class="c_ident" id="c_zvjwz8HPIq" href="./02_program_structure.html#c_zvjwz8HPIq"></a><span class="cm-variable">prompt</span>(<span class="cm-string">"Tell me everything you know."</span>, <span class="cm-string">"..."</span>);</pre>
<div class="image">
  <img src="./media/prompt.png" alt="An prompt dialog">
</div>
<p><a class="p_ident" id="p_mGjwXljToy" href="./02_program_structure.html#p_mGjwXljToy"></a>Тези две функции не се използват много в модерното уеб програмиране, най-вече защото нямате контрол върху начина, по който изкачащите прозорци изглеждат, но те са полезни за експерименти.</p>
<h2><a class="h_ident" id="h_rDxYNPd65Z" href="./02_program_structure.html#h_rDxYNPd65Z"></a>Контрол на потока</h2>
<p><a class="p_ident" id="p_QdCrOXOgYy" href="./02_program_structure.html#p_QdCrOXOgYy"></a>Когато програмата ви съдържа повече от едно твърдение, те се изпълняват, предсказуемо от горе на долу. Като надлежен пример, тази програма има две твърдения. Първото пита потребителя за номер (число), а второто, което се изпълнява след това, показва квадрата на този номер.</p>
<pre data-language="javascript" class="snippet cm-s-default"><a class="c_ident" id="c_vMmSZhI46K" href="./02_program_structure.html#c_vMmSZhI46K"></a><span class="cm-keyword">var</span> <span class="cm-variable">theNumber</span> <span class="cm-operator">=</span> <span class="cm-variable">Number</span>(<span class="cm-variable">prompt</span>(<span class="cm-string">"Pick a number"</span>, <span class="cm-string">""</span>));
<span class="cm-variable">alert</span>(<span class="cm-string">"Your number is the square root of "</span> <span class="cm-operator">+</span>
      <span class="cm-variable">theNumber</span> <span class="cm-operator">*</span> <span class="cm-variable">theNumber</span>);</pre>
<p><a class="p_ident" id="p_aq3OoDkq71" href="./02_program_structure.html#p_aq3OoDkq71"></a>Функцията <code>Number</code> конвентира стойността в номер (число). Ние се нуждаем от това преобразуване, защото резултата на <code>prompt</code> е <em>string</em> стойност, а ние искаме номер. Има подобни функции, като <code>String</code> и <code>Boolean</code>, конвертиращи стойности от тези видове.</p>
<p><a class="p_ident" id="p_M37XqCwh0I" href="./02_program_structure.html#p_M37XqCwh0I"></a>Тука е доста тривиално схематично представяне на правата за контрол на потока: </p>
<div class="image">
  <img src="./media/controlflow-straight.svg" alt="Trivial control flow">
</div>
<h2><a class="h_ident" id="h_wpz5oi2dy7" href="./02_program_structure.html#h_wpz5oi2dy7"></a>Условно изпълнение</h2>
<p><a class="p_ident" id="p_u+xpyPmLV8" href="./02_program_structure.html#p_u+xpyPmLV8"></a>Изпълнение на твърдение в линеен ред не е единственият вариант, който имаме. Една алтернатива е условно изпълнение, където можем да избираме между два различни пътя, базирани на булева стойност, като това:</p>
<div class="image">
  <img src="./media/controlflow-if.svg" alt="Conditional control flow">
</div>
<p><a class="p_ident" id="p_+kdDcK9eLo" href="./02_program_structure.html#p_+kdDcK9eLo"></a>Условното изпълнение е написано с <code>if</code> - ключова дума в JavaScript. В най-простия случай, ние искаме някакъв код да бъде изпълнен, ако и само ако даденото условие е изпълнено. Така например, в предишната програма, можем да искаме да покажем резултата на корен квадратен от дадено число само ако се въведе реално число.</p>
<pre data-language="javascript" class="snippet cm-s-default"><a class="c_ident" id="c_DPOOzOEZf+" href="./02_program_structure.html#c_DPOOzOEZf+"></a><span class="cm-keyword">var</span> <span class="cm-variable">theNumber</span> <span class="cm-operator">=</span> <span class="cm-variable">Number</span>(<span class="cm-variable">prompt</span>(<span class="cm-string">"Pick a number"</span>, <span class="cm-string">""</span>));
<span class="cm-keyword">if</span> (<span class="cm-operator">!</span><span class="cm-variable">isNaN</span>(<span class="cm-variable">theNumber</span>))
  <span class="cm-variable">alert</span>(<span class="cm-string">"Your number is the square root of "</span> <span class="cm-operator">+</span>
        <span class="cm-variable">theNumber</span> <span class="cm-operator">*</span> <span class="cm-variable">theNumber</span>);</pre>
<p><a class="p_ident" id="p_d0Z3YQB6e1" href="./02_program_structure.html#p_d0Z3YQB6e1"></a>С тази промяна, ако въведете “сирене”, на изхода няма да бъде показан резултат.</p>
<p><a class="p_ident" id="p_QqE0pn6CUK" href="./02_program_structure.html#p_QqE0pn6CUK"></a>Ключовата дума <code>if</code> изпълнява или прескача твърдение в зависимост от стойността на булевия израз. Решаващия израз е написан след ключовата дума в скоби, следвани от твърдението за изпълнение.</p>
<p><a class="p_ident" id="p_nJcsWbCJmU" href="./02_program_structure.html#p_nJcsWbCJmU"></a>Функцията <code>isNaN</code> е стандартна JavaScript функция, която връща <code>true</code> само ако даденият аргумент е <code>NaN</code>. Функцията <code>Number</code> връща <code>NaN</code> ако подадем <em>string</em>, който не е валиден номер. По този начин, условието се превежда до - “ако <code>theNumber</code> не е не-номер, направи това”.</p>
<p><a class="p_ident" id="p_l1EGERvXxU" href="./02_program_structure.html#p_l1EGERvXxU"></a>Вие често ще имате код, който се изпълнява само когато условието е изпълнено, но също така и код, който ще се занимава с другия случай. <code>else</code> е дума (означава в противен случай), която може да се използва с <code>if</code> за създаване на два отделни алтернативни пътя за изпълнение.</p>
<pre data-language="javascript" class="snippet cm-s-default"><a class="c_ident" id="c_2BC2dE/U8L" href="./02_program_structure.html#c_2BC2dE/U8L"></a><span class="cm-keyword">var</span> <span class="cm-variable">theNumber</span> <span class="cm-operator">=</span> <span class="cm-variable">Number</span>(<span class="cm-variable">prompt</span>(<span class="cm-string">"Pick a number"</span>, <span class="cm-string">""</span>));
<span class="cm-keyword">if</span> (<span class="cm-operator">!</span><span class="cm-variable">isNaN</span>(<span class="cm-variable">theNumber</span>))
  <span class="cm-variable">alert</span>(<span class="cm-string">"Your number is the square root of "</span> <span class="cm-operator">+</span>
        <span class="cm-variable">theNumber</span> <span class="cm-operator">*</span> <span class="cm-variable">theNumber</span>);
<span class="cm-keyword">else</span>
  <span class="cm-variable">alert</span>(<span class="cm-string">"Hey. Why didn't you give me a number?"</span>);</pre>
<p><a class="p_ident" id="p_ZmJjq4NvCB" href="./02_program_structure.html#p_ZmJjq4NvCB"></a>Ако имаме повече от два пътя от които да избираме, можем да използваме <code>if</code>/<code>else</code> “оковани” заедно. Ето един пример:</p>
<pre data-language="javascript" class="snippet cm-s-default"><a class="c_ident" id="c_9aykimugCx" href="./02_program_structure.html#c_9aykimugCx"></a><span class="cm-keyword">var</span> <span class="cm-variable">num</span> <span class="cm-operator">=</span> <span class="cm-variable">Number</span>(<span class="cm-variable">prompt</span>(<span class="cm-string">"Pick a number"</span>, <span class="cm-string">"0"</span>));

<span class="cm-keyword">if</span> (<span class="cm-variable">num</span> <span class="cm-operator">&lt;</span> <span class="cm-number">10</span>)
  <span class="cm-variable">alert</span>(<span class="cm-string">"Small"</span>);
<span class="cm-keyword">else</span> <span class="cm-keyword">if</span> (<span class="cm-variable">num</span> <span class="cm-operator">&lt;</span> <span class="cm-number">100</span>)
  <span class="cm-variable">alert</span>(<span class="cm-string">"Medium"</span>);
<span class="cm-keyword">else</span>
  <span class="cm-variable">alert</span>(<span class="cm-string">"Large"</span>);</pre>
<p><a class="p_ident" id="p_6w2546HxbK" href="./02_program_structure.html#p_6w2546HxbK"></a>Програмата първо ще провери дали <code>num</code> е по-малко от 10. Ако е така, то избира този път и ще изпише <code>"Small"</code> и приключва. Ако не е така, отива на пътя на <code>else</code> който съдържа втори <code>if</code>. Ако второто условие (<code>&lt; 100</code>) е изпълнено, това означава, че броят  е между 10 и 100 и се изписва <code>"Medium"</code>. Ако и това не стане на последно място е пътя else, при който числото е по-голямо от 100.</p>
<p><a class="p_ident" id="p_JniuPPdJZD" href="./02_program_structure.html#p_JniuPPdJZD"></a>Схемата за тази програма изглежда нещо такова:</p>
<div class="image">
  <img src="./media/controlflow-nested-if.svg" alt="Nested if control flow">
</div>
<h2 id="loops"><a class="h_ident" id="h_FaGGgUI+MM" href="./02_program_structure.html#h_FaGGgUI+MM"></a>While  and  do loops  (цикли)</h2>
<p><a class="p_ident" id="p_FIHE6k56BA" href="./02_program_structure.html#p_FIHE6k56BA"></a>Направете една програма, която отпечатва всички четни числа от 0 до 12. Един от начините да се напише това е :</p>
<pre data-language="javascript" class="snippet cm-s-default"><a class="c_ident" id="c_ciaCwGgFZR" href="./02_program_structure.html#c_ciaCwGgFZR"></a><span class="cm-variable">console</span>.<span class="cm-property">log</span>(<span class="cm-number">0</span>);
<span class="cm-variable">console</span>.<span class="cm-property">log</span>(<span class="cm-number">2</span>);
<span class="cm-variable">console</span>.<span class="cm-property">log</span>(<span class="cm-number">4</span>);
<span class="cm-variable">console</span>.<span class="cm-property">log</span>(<span class="cm-number">6</span>);
<span class="cm-variable">console</span>.<span class="cm-property">log</span>(<span class="cm-number">8</span>);
<span class="cm-variable">console</span>.<span class="cm-property">log</span>(<span class="cm-number">10</span>);
<span class="cm-variable">console</span>.<span class="cm-property">log</span>(<span class="cm-number">12</span>);</pre>
<p><a class="p_ident" id="p_r1EVilCb9Y" href="./02_program_structure.html#p_r1EVilCb9Y"></a>Това работи, но идеята за написването на една програма  е да се направи нещо с по-малко работа, не повече. Ако имате нужда от всички четни числа до 1000, то предишното би било неефективно. Това което ни трябва е начин да се повтаря някакъв код. Тази форма на контрол на потока се нарича цикъл (<em>loop</em>):</p>
<div class="image">
  <img src="./media/controlflow-loop.svg" alt="Loop control flow">
</div>
<p><a class="p_ident" id="p_1PXG58nhBq" href="./02_program_structure.html#p_1PXG58nhBq"></a>Цикъл контрола на потока ни позволява да се върнем в някакъв момент на програмата, където сме били преди и да я повторим с настоящата ни програма. Ако комбинираме с променлива, която има значение, можем да направим нещо такова:</p>
<pre data-language="javascript" class="snippet cm-s-default"><a class="c_ident" id="c_VdVRvg/hoC" href="./02_program_structure.html#c_VdVRvg/hoC"></a><span class="cm-keyword">var</span> <span class="cm-variable">number</span> <span class="cm-operator">=</span> <span class="cm-number">0</span>;
<span class="cm-keyword">while</span> (<span class="cm-variable">number</span> <span class="cm-operator">&lt;=</span> <span class="cm-number">12</span>) {
  <span class="cm-variable">console</span>.<span class="cm-property">log</span>(<span class="cm-variable">number</span>);
  <span class="cm-variable">number</span> <span class="cm-operator">=</span> <span class="cm-variable">number</span> <span class="cm-operator">+</span> <span class="cm-number">2</span>;
}
<span class="cm-comment">// → 0</span>
<span class="cm-comment">// → 2</span>
<span class="cm-comment">//   … etcetera</span></pre>
<p><a class="p_ident" id="p_tCSkGQTO9J" href="./02_program_structure.html#p_tCSkGQTO9J"></a>В твърдението се започва с ключовата дума <code>while</code>, която създава цикъл. Думата <code>while</code> е последвана от израз, нещо като <code>if</code> в скоби и след това от твърдение в фигурни скоби. Цикълът изпълнява това твърдение докато e <code>true</code>, след което се превръща в булев тип, докато е <em>true</em> изразът произвежда стойност.</p>
<p><a class="p_ident" id="p_iwEcAR3f0a" href="./02_program_structure.html#p_iwEcAR3f0a"></a>В този цикъл искаме да отпечатаме и двете, текущия номер и добавеното две към нашата променлива. Всеки път когато трябва да се изпълни някакво твърдение вътре в цикъла, ние го поставяме във фигурни скоби <code>{}</code>. Фигурните скоби направляват твърденията, както иска изразът в обикновените скоби: те ги групират заедно, правейки ги, като едно твърдение. Поредицата от твърдения поставени във фигурни скоби се нарича блок.</p>
<p><a class="p_ident" id="p_UxO2K/wbSG" href="./02_program_structure.html#p_UxO2K/wbSG"></a>Много JavaScript програмисти поставят тялото на всеки цикъл или <code>if</code> в скоби. Те правят това за по-голяма съгласуваност и да не се налага да добавят или премахват скоби при промяна на броя на твърденията в тялото по-късно. В тази книга, аз ще пиша повечето единични твърдения без скоби, тъй като ценя краткостта. Вие сте свободни да избирате, кой от двата стила предпочитате.</p>
<p><a class="p_ident" id="p_5AsEqW7qSx" href="./02_program_structure.html#p_5AsEqW7qSx"></a>Променливата <code>number</code> показва начина, по който с дадена променлива може да следите напредъка на програмата. Всеки път когато цикълът се повтаря, <code>number</code> се увеличава с <code>2</code>. След това, в началото на всяко повторение, тя се сравнява с броя <code>12</code> и решава дали да продължи или дали програмата е изпълнила цялата задача и да спре.</p>
<p><a class="p_ident" id="p_eimxKSJFYF" href="./02_program_structure.html#p_eimxKSJFYF"></a>Като пример, че всъщност правим нещо полезно, сега ще напишем програма, която изчислява и показва стойността на 2<sup>10</sup> (2 на 10-та степен). Ще използваме две променливи: едната, за да следим резултата и една да брои, колко често умножаваме този резултат по 2. Цикълът проверява дали втората променлива не е достигнала 10 и след това актуализира двете променливи.</p>
<pre data-language="javascript" class="snippet cm-s-default"><a class="c_ident" id="c_Ec0TnYkpCa" href="./02_program_structure.html#c_Ec0TnYkpCa"></a><span class="cm-keyword">var</span> <span class="cm-variable">result</span> <span class="cm-operator">=</span> <span class="cm-number">1</span>;
<span class="cm-keyword">var</span> <span class="cm-variable">counter</span> <span class="cm-operator">=</span> <span class="cm-number">0</span>;
<span class="cm-keyword">while</span> (<span class="cm-variable">counter</span> <span class="cm-operator">&lt;</span> <span class="cm-number">10</span>) {
  <span class="cm-variable">result</span> <span class="cm-operator">=</span> <span class="cm-variable">result</span> <span class="cm-operator">*</span> <span class="cm-number">2</span>;
  <span class="cm-variable">counter</span> <span class="cm-operator">=</span> <span class="cm-variable">counter</span> <span class="cm-operator">+</span> <span class="cm-number">1</span>;
}
<span class="cm-variable">console</span>.<span class="cm-property">log</span>(<span class="cm-variable">result</span>);
<span class="cm-comment">// → 1024</span></pre>
<p><a class="p_ident" id="p_MERlXZu4+T" href="./02_program_structure.html#p_MERlXZu4+T"></a><em>Counter</em> (брояч) може да започне от <code>1</code> и да проверява до <code>&lt;= 10</code>, но по причини, които ще станат ясни в 
<a href="./04_data.html#array_indexing">Глава 4</a>, това е добра идея да свикнете с броенето от нула.</p>
<p><a class="p_ident" id="p_vrOESKfZl/" href="./02_program_structure.html#p_vrOESKfZl/"></a>Цикъла <code>do</code> е контролна структура, подобен на <code>while</code> цикъла. Той се различава само по една точка: един <code>do</code> цикъл винаги изпълнява блока в тялото си поне веднъж и започва да проверява дали трябва да спре едва след първото завъртане. За да направи това, условността се поставя след тялото на цикъла:</p>
<pre data-language="javascript" class="snippet cm-s-default"><a class="c_ident" id="c_WhNPkjCnm1" href="./02_program_structure.html#c_WhNPkjCnm1"></a><span class="cm-keyword">do</span> {
  <span class="cm-keyword">var</span> <span class="cm-variable">yourName</span> <span class="cm-operator">=</span> <span class="cm-variable">prompt</span>(<span class="cm-string">"Who are you?"</span>);
} <span class="cm-keyword">while</span> (<span class="cm-operator">!</span><span class="cm-variable">yourName</span>);
<span class="cm-variable">console</span>.<span class="cm-property">log</span>(<span class="cm-variable">yourName</span>);</pre>
<p><a class="p_ident" id="p_gpU7uCWE2q" href="./02_program_structure.html#p_gpU7uCWE2q"></a>Тази програма иска да въведете вашето име. Тя ще го иска отново и отново, докато не въведете нещо, което не е празен <em>string</em>. Оператора  <code>!</code> ще превърне стойността в булев тип преди да я анулира и всички <em>strings</em> съдържащи се в <code>""</code> ще конвертира до <code>true</code>. Това означава, че цикъла ще продължава да се върти, докато не въведете нещо, което не е празен <em>string</em>.</p>
<h2><a class="h_ident" id="h_3I0M2f1Cmh" href="./02_program_structure.html#h_3I0M2f1Cmh"></a>Ред  код</h2>
<p><a class="p_ident" id="p_GLz5olRt8V" href="./02_program_structure.html#p_GLz5olRt8V"></a>Вероятно сте забелязали празните пространства пред някои твърдения. В JavaScript те не са задължителни - компютъра ще приеме програмата добре и без тях. В действителност, дори паузите в лините на програмите не са задължителни. Може да напишете програма, като една дълга линия, ако се чувствате добре с това. Ролята на нотацията вътре в блока е да направи структурата на кода да се откроява. В сложен код, където новите блокове са поставени в други блокове, може да стане трудно четима и да не се разбира, кога един блок свършва и започва друг. С подходяща нотация, визуалната форма на програмата съответства на формата на блоковете вътре в нея. Обичам да използвам две празни пространства за всеки отворен блок, но вкусовете се различават - някои използват четири празни пространства, други раздела на знака.</p>
<h2><a class="h_ident" id="h_oupMC+5FKN" href="./02_program_structure.html#h_oupMC+5FKN"></a>for loops</h2>
<p><a class="p_ident" id="p_t55fBgZ9ww" href="./02_program_structure.html#p_t55fBgZ9ww"></a>Много цикли следват модела на <code>while</code> цикъла. Първо, се създава  променлива “брояч (<em>count</em>)”, за да следи прогреса на цикъла. После <code>while</code> цикъл, чийто израз проверява дали брояча не е достигнал края. И в края на тялото на цикъла, брояча се актуализира.</p>
<p><a class="p_ident" id="p_i8KoivP+MV" href="./02_program_structure.html#p_i8KoivP+MV"></a>Защо този модел се използва толкова често в JavaScript и други езици, малко по-късно. А сега <code>for</code> <em>loop</em>.</p>
<pre data-language="javascript" class="snippet cm-s-default"><a class="c_ident" id="c_3Azuln38qw" href="./02_program_structure.html#c_3Azuln38qw"></a><span class="cm-keyword">for</span> (<span class="cm-keyword">var</span> <span class="cm-variable">number</span> <span class="cm-operator">=</span> <span class="cm-number">0</span>; <span class="cm-variable">number</span> <span class="cm-operator">&lt;=</span> <span class="cm-number">12</span>; <span class="cm-variable">number</span> <span class="cm-operator">=</span> <span class="cm-variable">number</span> <span class="cm-operator">+</span> <span class="cm-number">2</span>)
  <span class="cm-variable">console</span>.<span class="cm-property">log</span>(<span class="cm-variable">number</span>);
<span class="cm-comment">// → 0</span>
<span class="cm-comment">// → 2</span>
<span class="cm-comment">//   … etcetera</span></pre>
<p><a class="p_ident" id="p_dGpYwDLcUj" href="./02_program_structure.html#p_dGpYwDLcUj"></a>Тази програма е точно еквивалент на 
<a href="./02_program_structure.html#loops">програмата</a> по-рано. Единствената промяна е, че всички твърдения са свързани на едно място в цикъла и сега са групирани заедно</p>
<p><a class="p_ident" id="p_LW20YJQoF9" href="./02_program_structure.html#p_LW20YJQoF9"></a>В скобите след ключовата дума <code>for</code> трябва да съдържат две точки и запетаи. Частта преди първата запетая инициализира цикъла, чрез дефиниране на променлива. Втората част е израз, който проверява дали цикъла трябва да продължи. В последната част се актуализира състоянието на цикъла след всяко завъртане. В повечето случаи това е по-кратко и по-ясно, от колкото <code>while</code> конструкция.</p>
<p><a class="p_ident" id="p_Rst5RlpePZ" href="./02_program_structure.html#p_Rst5RlpePZ"></a>Следва кода, който изчислява 2<sup>10</sup>, като използва <code>for</code> вместо <code>while</code>:</p>
<pre data-language="javascript" class="snippet cm-s-default"><a class="c_ident" id="c_0irNU0p0MR" href="./02_program_structure.html#c_0irNU0p0MR"></a><span class="cm-keyword">var</span> <span class="cm-variable">result</span> <span class="cm-operator">=</span> <span class="cm-number">1</span>;
<span class="cm-keyword">for</span> (<span class="cm-keyword">var</span> <span class="cm-variable">counter</span> <span class="cm-operator">=</span> <span class="cm-number">0</span>; <span class="cm-variable">counter</span> <span class="cm-operator">&lt;</span> <span class="cm-number">10</span>; <span class="cm-variable">counter</span> <span class="cm-operator">=</span> <span class="cm-variable">counter</span> <span class="cm-operator">+</span> <span class="cm-number">1</span>)
  <span class="cm-variable">result</span> <span class="cm-operator">=</span> <span class="cm-variable">result</span> <span class="cm-operator">*</span> <span class="cm-number">2</span>;
<span class="cm-variable">console</span>.<span class="cm-property">log</span>(<span class="cm-variable">result</span>);
<span class="cm-comment">// → 1024</span></pre>
<p><a class="p_ident" id="p_pNim3UxKW2" href="./02_program_structure.html#p_pNim3UxKW2"></a>Имайте в предвид, че въпреки че блока не се отваря с <code>{</code>, изложението в контура все още тире две празни пространства, за да стане ясно, че то "принадлежи" на линия преди него.</p>
<h2><a class="h_ident" id="h_WWKAoSPJ47" href="./02_program_structure.html#h_WWKAoSPJ47"></a>Прекъсване на Loop</h2>
<p><a class="p_ident" id="p_ct/RAqWly8" href="./02_program_structure.html#p_ct/RAqWly8"></a>Когато цикълът работи, <code>false</code> не е единственият начин да се прекъсне. Има специална дума, наречена <code>break</code>, която има ефект за незабавно прекъсване и излизане от цикъла.</p>
<p><a class="p_ident" id="p_Vnm45Nv5hS" href="./02_program_structure.html#p_Vnm45Nv5hS"></a>Тази програма илюстрира <code>break</code>. Тя намира първото число, което е едновременно по-голямо или равно на 20 и се дели на 7:</p>
<pre data-language="javascript" class="snippet cm-s-default"><a class="c_ident" id="c_7paajfWUVm" href="./02_program_structure.html#c_7paajfWUVm"></a><span class="cm-keyword">for</span> (<span class="cm-keyword">var</span> <span class="cm-variable">current</span> <span class="cm-operator">=</span> <span class="cm-number">20</span>; ; <span class="cm-variable">current</span><span class="cm-operator">++</span>) {
  <span class="cm-keyword">if</span> (<span class="cm-variable">current</span> <span class="cm-operator">%</span> <span class="cm-number">7</span> <span class="cm-operator">==</span> <span class="cm-number">0</span>)
    <span class="cm-keyword">break</span>;
}
<span class="cm-variable">console</span>.<span class="cm-property">log</span>(<span class="cm-variable">current</span>);
<span class="cm-comment">// → 21</span></pre>
<p><a class="p_ident" id="p_6KpM9sBZ2r" href="./02_program_structure.html#p_6KpM9sBZ2r"></a>Използването на оператора (<code>%</code>) за остатък, е един лесен начин да се провери дали даден номер е делим от друг номер. Ако е така, остатъка от деленето е нула.</p>
<p><a class="p_ident" id="p_3UnZkFW7lj" href="./02_program_structure.html#p_3UnZkFW7lj"></a><code>For</code> цикъла в примера не разполага с една част, която проверява за край на цикъла. Това означава, че цикъла никога няма да спре, освен ако <code>break</code> не го прекъсне.</p>
<p><a class="p_ident" id="p_2mGltrXORo" href="./02_program_structure.html#p_2mGltrXORo"></a>Ако не използвате <code>break</code> или случайно напишете състояние, което води винаги до <code>true</code>, вашата програма ще забие в един безкраен цикъл. А програма в безкраен цикъл никога няма да свърши, което обикновено е нещо много лошо.</p>
<p><a class="p_ident" id="p_0F9xH2r4jT" href="./02_program_structure.html#p_0F9xH2r4jT"></a>Ако създадете един безкраен цикъл в програмите на тази книга, тя ще ви попита дали искате да спрете след няколко секунди. Ако това не помогне, ще трябва да затворите раздела в който работите или ако е браузър, целия браузър за да се възстанови системата.</p>
<p><a class="p_ident" id="p_f7LsUmJq1I" href="./02_program_structure.html#p_f7LsUmJq1I"></a><code>Continue</code> е ключова дума подобна на <code>break</code>, която оказва влияние върху прогреса на цикъла. Когато се срещне <code>continue</code> в тялото на цикъла, контролирано се изкача от него и се продължава със следващата итерация на цикъла.</p>
<h2><a class="h_ident" id="h_TGUhwjSkqm" href="./02_program_structure.html#h_TGUhwjSkqm"></a>Актуализиране на променливи сбито</h2>
<p><a class="p_ident" id="p_4XaFXVHI9b" href="./02_program_structure.html#p_4XaFXVHI9b"></a>Има една особеност на цикъла, програмата често се нуждае от “обновяване” на променливата за да хване стойност на базата на предишната стойност:</p>
<pre data-language="javascript" class="snippet cm-s-default"><a class="c_ident" id="c_2I9qAKEFto" href="./02_program_structure.html#c_2I9qAKEFto"></a><span class="cm-variable">counter</span> <span class="cm-operator">=</span> <span class="cm-variable">counter</span> <span class="cm-operator">+</span> <span class="cm-number">1</span>;</pre>
<p><a class="p_ident" id="p_n9PMtWEgzN" href="./02_program_structure.html#p_n9PMtWEgzN"></a>JavaScript осигурява пряк път за това:</p>
<pre data-language="javascript" class="snippet cm-s-default"><a class="c_ident" id="c_+5YpCv/iKG" href="./02_program_structure.html#c_+5YpCv/iKG"></a><span class="cm-variable">counter</span> <span class="cm-operator">+=</span> <span class="cm-number">1</span>;</pre>
<p><a class="p_ident" id="p_3IlWnnMlMo" href="./02_program_structure.html#p_3IlWnnMlMo"></a>Подобни шорткъти работят и за много други оператори, като <code>result *= 2</code> за корен квадратен или <code>counter -= 1</code> за броене на долу.</p>
<p><a class="p_ident" id="p_+odXBLNKvV" href="./02_program_structure.html#p_+odXBLNKvV"></a>Това ни позволява да съкратим записа на примера малко:</p>
<pre data-language="javascript" class="snippet cm-s-default"><a class="c_ident" id="c_tBGVwznf7K" href="./02_program_structure.html#c_tBGVwznf7K"></a><span class="cm-keyword">for</span> (<span class="cm-keyword">var</span> <span class="cm-variable">number</span> <span class="cm-operator">=</span> <span class="cm-number">0</span>; <span class="cm-variable">number</span> <span class="cm-operator">&lt;=</span> <span class="cm-number">12</span>; <span class="cm-variable">number</span> <span class="cm-operator">+=</span> <span class="cm-number">2</span>)
  <span class="cm-variable">console</span>.<span class="cm-property">log</span>(<span class="cm-variable">number</span>);</pre>
<p><a class="p_ident" id="p_jpGEbhH1GX" href="./02_program_structure.html#p_jpGEbhH1GX"></a>За <code>counter += 1</code> и <code>counter -= 1</code>, има още по-кратки еквиваленти: <code>counter++</code> и <code>counter--</code>.</p>
<h2><a class="h_ident" id="h_jMKsa0SXdL" href="./02_program_structure.html#h_jMKsa0SXdL"></a>Dispatching on a value with switch</h2>
<p><a class="p_ident" id="p_t3Fw/3tp0F" href="./02_program_structure.html#p_t3Fw/3tp0F"></a>Той е общ за кода и изглежда така:</p>
<pre data-language="javascript" class="snippet cm-s-default"><a class="c_ident" id="c_A9TwfNNqCW" href="./02_program_structure.html#c_A9TwfNNqCW"></a><span class="cm-keyword">if</span> (<span class="cm-variable">variable</span> <span class="cm-operator">==</span> <span class="cm-string">"value1"</span>) <span class="cm-variable">action1</span>();
<span class="cm-keyword">else</span> <span class="cm-keyword">if</span> (<span class="cm-variable">variable</span> <span class="cm-operator">==</span> <span class="cm-string">"value2"</span>) <span class="cm-variable">action2</span>();
<span class="cm-keyword">else</span> <span class="cm-keyword">if</span> (<span class="cm-variable">variable</span> <span class="cm-operator">==</span> <span class="cm-string">"value3"</span>) <span class="cm-variable">action3</span>();
<span class="cm-keyword">else</span> <span class="cm-variable">defaultAction</span>();</pre>
<p><a class="p_ident" id="p_NAtglzdIez" href="./02_program_structure.html#p_NAtglzdIez"></a>Има конструкция наречена <code>switch</code>, която е предназначена за оптимизиране на такъв вид код по директен начин. За съжаление JavaScript използва за това, нещо което е наследила от C / Java езиците и е малко неудобно - <code>if</code> отчетите изглеждат по-добре. Ето един пример:</p>
<pre data-language="javascript" class="snippet cm-s-default"><a class="c_ident" id="c_algpo6jq8U" href="./02_program_structure.html#c_algpo6jq8U"></a><span class="cm-keyword">switch</span> (<span class="cm-variable">prompt</span>(<span class="cm-string">"What is the weather like?"</span>)) {
  <span class="cm-keyword">case</span> <span class="cm-string">"rainy"</span>:
    <span class="cm-variable">console</span>.<span class="cm-property">log</span>(<span class="cm-string">"Remember to bring an umbrella."</span>);
    <span class="cm-keyword">break</span>;
  <span class="cm-keyword">case</span> <span class="cm-string">"sunny"</span>:
    <span class="cm-variable">console</span>.<span class="cm-property">log</span>(<span class="cm-string">"Dress lightly."</span>);
  <span class="cm-keyword">case</span> <span class="cm-string">"cloudy"</span>:
    <span class="cm-variable">console</span>.<span class="cm-property">log</span>(<span class="cm-string">"Go outside."</span>);
    <span class="cm-keyword">break</span>;
  <span class="cm-keyword">default</span>:
    <span class="cm-variable">console</span>.<span class="cm-property">log</span>(<span class="cm-string">"Unknown weather type!"</span>);
    <span class="cm-keyword">break</span>;
}</pre>
<p><a class="p_ident" id="p_25X42G30Nq" href="./02_program_structure.html#p_25X42G30Nq"></a>Можете да поставите произволен брой <code>case</code> етикети вътре в блока на <code>switch</code>. Програмата ще отиде на етикета, който съответства на стойността, която <code>switch</code> зададе или <code>default</code> ако не намери съответна стойност. <em>Switch</em> започва да изпълнява отчети там, дори ако са под друг етикет, докато не достигне <code>break</code>. В някои случаи като например <code>"sunny"</code> в примера, това може да се използва за споделяне на код между случаите (програмата препоръчва да се излезе на вън, както при слънчево така и при облачно време). Но внимавайте: така лесно може да се забрави <code>break</code>, което ще доведе до изпълнение на код, който не искате да бъде изпълнен.</p>
<h2><a class="h_ident" id="h_t54vuASjLD" href="./02_program_structure.html#h_t54vuASjLD"></a>Капитализация </h2>
<p><a class="p_ident" id="p_3D9T5AdSU0" href="./02_program_structure.html#p_3D9T5AdSU0"></a>Имената на променливите не могат да съдържат интервали, но често е полезно използването на няколко думи за по-ясно описване на променливата. Има доста начини за писане на име на променлива, ето няколко от тях:</p>
<pre>fuzzylittleturtle
fuzzy_little_turtle
FuzzyLittleTurtle
fuzzyLittleTurtle</pre>
<p><a class="p_ident" id="p_iHeX2bOrpK" href="./02_program_structure.html#p_iHeX2bOrpK"></a>Първият стил е труден за четене. Лично аз, като гледам долните, ми се струва, че този стил е безполезно да се пише. Стандартните функции на JavaScript, както и повечето програмисти, следват долните стилове, като се възползват от всяка дума. Не е трудно да се свикне с малките неща, като това. Код със смесени стилове на именуване може да бъде шокиращ за четене, така че просто следвайте тази конвенция.</p>
<p><a class="p_ident" id="p_zMlRK/pymj" href="./02_program_structure.html#p_zMlRK/pymj"></a>В няколко случая, като например функцията <code>Number</code>, първата буква също е капитализирана. Това е направено за да се отбележи тази функция, като конструктор. Какво е конструктор ще стане ясно в 
<a href="./06_object.html#constructors">Глава 6</a>. За сега не трябва да се притесняваме от тази очевидна липса на съгласуваност.</p>
<h2><a class="h_ident" id="h_/OBuIOX390" href="./02_program_structure.html#h_/OBuIOX390"></a>Коментари</h2>
<p><a class="p_ident" id="p_0/Ms9AYRwI" href="./02_program_structure.html#p_0/Ms9AYRwI"></a>Често суровия код не предоставя цялата информация, която искаме програмата да предаде на евентуален друг читател или я предава по такъв загадъчен начин, че хората не могат да я разберат. В други случаи, може би ако се почувствате настроени поетично или искате да включите някои мисли, като част от вашата програма. Може да използвате коментарите за това.</p>
<p><a class="p_ident" id="p_c5N0ebF2ts" href="./02_program_structure.html#p_c5N0ebF2ts"></a>Коментара е текст, който е част от програмата, но не се изпълнява от компютъра. В JavaScript има два начина за писане на коментари. За да напишете коментар на един ред, може да използвате две наклонени черти (<code>//</code>) и след тях текста на коментара:</p>
<pre data-language="javascript" class="snippet cm-s-default"><a class="c_ident" id="c_0ZikuiZ4zg" href="./02_program_structure.html#c_0ZikuiZ4zg"></a><span class="cm-keyword">var</span> <span class="cm-variable">accountBalance</span> <span class="cm-operator">=</span> <span class="cm-variable">calculateBalance</span>(<span class="cm-variable">account</span>);
<span class="cm-comment">// It's a green hollow where a river sings</span>
<span class="cm-variable">accountBalance</span>.<span class="cm-property">adjust</span>();
<span class="cm-comment">// Madly catching white tatters in the grass.</span>
<span class="cm-keyword">var</span> <span class="cm-variable">report</span> <span class="cm-operator">=</span> <span class="cm-keyword">new</span> <span class="cm-variable">Report</span>();
<span class="cm-comment">// Where the sun on the proud mountain rings:</span>
<span class="cm-variable">addToReport</span>(<span class="cm-variable">accountBalance</span>, <span class="cm-variable">report</span>);
<span class="cm-comment">// It's a little valley, foaming like light in a glass.</span></pre>
<p><a class="p_ident" id="p_UD6DcJKN/S" href="./02_program_structure.html#p_UD6DcJKN/S"></a>Този вид <code>//</code> коментар е само до края на реда. Ако текста се постави между <code>/*</code> и <code>*/</code> той ще бъде игнориран, независимо колко е голям или дали съдържа нови редове. Това често е полезно за добавяне на блокове от информация за даден файл или парче от код.</p>
<pre data-language="javascript" class="snippet cm-s-default"><a class="c_ident" id="c_qmmXe1V0mf" href="./02_program_structure.html#c_qmmXe1V0mf"></a><span class="cm-comment">/*</span>
<span class="cm-comment"> I first found this number scrawled on the back of one of</span>
<span class="cm-comment"> my notebooks a few years ago. Since then, it has often</span>
<span class="cm-comment"> dropped by, showing up in phone numbers and the serial</span>
<span class="cm-comment"> numbers of products that I've bought. It obviously likes</span>
<span class="cm-comment"> me, so I've decided to keep it.</span>
<span class="cm-comment">*/</span>
<span class="cm-keyword">var</span> <span class="cm-variable">myNumber</span> <span class="cm-operator">=</span> <span class="cm-number">11213</span>;</pre>
<h2><a class="h_ident" id="h_ErccPg/l98" href="./02_program_structure.html#h_ErccPg/l98"></a>Резюме</h2>
<p><a class="p_ident" id="p_qenTzu+nvg" href="./02_program_structure.html#p_qenTzu+nvg"></a>Вече знаем, че една програма е изградена от твърдения, които понякога се съдържат в други твърдения. Твърденията са склонни да съдържат изрази, които от своя страна могат да бъдат изградени от по-малки изрази.</p>
<p><a class="p_ident" id="p_KbysBfaBh4" href="./02_program_structure.html#p_KbysBfaBh4"></a>Поставянето на твърдения едно след друго, се изпълняват от програмата от горе на долу. Можете да въведете прекъсвания в потока за контрол, чрез използване на условия:(<code>if</code>, <code>else</code>, и <code>switch</code>) и
цикли (<code>while</code>, <code>do</code>, и <code>for</code>).</p>
<p><a class="p_ident" id="p_cDVCQB0d+r" href="./02_program_structure.html#p_cDVCQB0d+r"></a>Променливите могат да бъдат използвани, за да се подадат парчета от данни по име и са полезни за проследяване на състоянието на програмите. Околната среда е набор от променливи, които са дефинирани. Системата на JavaScript винаги поставя редица полезни стандартни променливи във вашето обкръжение.</p>
<p><a class="p_ident" id="p_zgNEy0za9M" href="./02_program_structure.html#p_zgNEy0za9M"></a>Функциите са специални стойности, които оформят парче от програмата. Може да се позовавате на тях, като пишете <code>functionName(argument1, argument2)</code>. Извикана такава функция е израз и може да даде стойност.</p>
<h2><a class="h_ident" id="h_TcUD2vzyMe" href="./02_program_structure.html#h_TcUD2vzyMe"></a>Упражнения</h2>
<p><a class="p_ident" id="p_Uj/Ehlt+c3" href="./02_program_structure.html#p_Uj/Ehlt+c3"></a>Ако не сте сигурни как да пробвате вашите решения на упражненията на страниците на тази книга, прочетете <a href="./00_intro.html#intro">въведението</a>.</p>
<p><a class="p_ident" id="p_VR0+805/R0" href="./02_program_structure.html#p_VR0+805/R0"></a>Всяко упражнение започва с описание на проблема. Прочете го и се опитайте да решите задачата. Ако се сблъскате с проблеми, може да прочетете помощта след упражнението. Пълни решения на упражненията не са включени в книгата, но може да ги намерите онлайн на адрес <a href="http://eloquentjavascript.net/code"><em>eloquentjavascript.net/code</em></a>. Ако искате да научите нещо от упражненията, аз ви препоръчвам да прегледате решенията само след като сте решили задачата или най-малко, след като сте мислили и опитвали да я решите достатъчно дълго, за да имате леко главоболие.</p>
<h3><a class="h_ident" id="h_umoXp9u0e7" href="./02_program_structure.html#h_umoXp9u0e7"></a>Цикъл триъгълник</h3>
<p><a class="p_ident" id="p_pP646YLlGy" href="./02_program_structure.html#p_pP646YLlGy"></a>Напиши цикъл, който прави седем извиквания на <code>console.log</code> и произвежда следния триъгълник:</p>
<pre>#
##
###
####
#####
######
#######</pre>
<p><a class="p_ident" id="p_hwij+BD/vz" href="./02_program_structure.html#p_hwij+BD/vz"></a>Може да ви бъде полезно, да знаете, че можете да намерите дължината на <em>string</em> с написването на <code>.length</code> след него.</p>
<pre data-language="javascript" class="snippet cm-s-default"><a class="c_ident" id="c_UHjV4GXoBw" href="./02_program_structure.html#c_UHjV4GXoBw"></a><span class="cm-keyword">var</span> <span class="cm-variable">abc</span> <span class="cm-operator">=</span> <span class="cm-string">"abc"</span>;
<span class="cm-variable">console</span>.<span class="cm-property">log</span>(<span class="cm-variable">abc</span>.<span class="cm-property">length</span>);
<span class="cm-comment">// → 3</span></pre>
<p><a class="p_ident" id="p_hzLkQ7lBb5" href="./02_program_structure.html#p_hzLkQ7lBb5"></a>Повечето упражнения съдържат част от код, който може да променяте, за да решите упражнението. Не забравяйте, че можете да щракате на блоковете код, за да ги редактирате.</p>
<pre data-language="javascript" class="snippet cm-s-default"><a class="c_ident" id="c_CfkOp8tkUe" href="./02_program_structure.html#c_CfkOp8tkUe"></a><span class="cm-comment">// Your code here.</span></pre>
<div class="solution"><div class="solution-text">
<p><a class="p_ident" id="p_4G9czVhC4S" href="./02_program_structure.html#p_4G9czVhC4S"></a>Може да започнете с една програма, която просто отпечатва числата от 1 до 7, които могат да се извлекат с няколко модификации за отпечатване на 
<a href="./02_program_structure.html#loops">четни числа показано в примера</a> на тази глава по-рано, където въведохме <code>for</code> цикъла.</p>
<p><a class="p_ident" id="p_Cfhk1uLlnS" href="./02_program_structure.html#p_Cfhk1uLlnS"></a>Сега помислете за еквивалентността между номера и string характери. Можа да преминете от 1 в 2 чрез добавяне на 1 (<code>+= 1</code>). По същия начин, може да се премине от <code>"#"</code> в <code>"##"</code> чрез добавяне на знак (<code>+= "#"</code>). По този начин, вашето решение ще следи отблизо програмата за брой-печат.</p>
</div></div>
<h3><a class="h_ident" id="h_rebKE3gdjV" href="./02_program_structure.html#h_rebKE3gdjV"></a>FizzBuzz</h3>
<p><a class="p_ident" id="p_i0Cvwf75cQ" href="./02_program_structure.html#p_i0Cvwf75cQ"></a>Напишете програма, която използва <code>console.log</code> за да отпечата всички числа от 1 до 100, с две изключения. За номера, кратни на 3 - да печата <code>"Fizz"</code>, а за номера кратни на 5 - да печата <code>"Buzz"</code> вместо тях.</p>
<p><a class="p_ident" id="p_fJ/4Bt0n0A" href="./02_program_structure.html#p_fJ/4Bt0n0A"></a>Когато това проработи, променете програмата си да отпечатва <code>"FizzBuzz"</code> за номера, които са неделими на 3 и 5, като продължите да отпечатвате <code>"Fizz"</code> и <code>"Buzz"</code></p>
<p><a class="p_ident" id="p_ixkJ0lwGKY" href="./02_program_structure.html#p_ixkJ0lwGKY"></a>(Това всъщност е един въпрос от интервю, с който разчистват значителен процент от програмисти кандидати. Така че, ако решите тази задача, ще се почувствате по добре).</p>
<pre data-language="javascript" class="snippet cm-s-default"><a class="c_ident" id="c_CfkOp8tkUe" href="./02_program_structure.html#c_CfkOp8tkUe"></a><span class="cm-comment">// Your code here.</span></pre>
<div class="solution"><div class="solution-text">
<p><a class="p_ident" id="p_eChcRqNQtZ" href="./02_program_structure.html#p_eChcRqNQtZ"></a>Работата над цифрите е ясно, че е с цикъл, но избора какво да отпечатвате  е въпрос на условно изпълнение. Помните ли трика с използване на оператора за остатък (<code>%</code>), който проверява дали даден номер се дели на друг номер (остатък нула).</p>
<p><a class="p_ident" id="p_6QvPT/yNQ2" href="./02_program_structure.html#p_6QvPT/yNQ2"></a>В първата версия, има три възможни изхода за всеки номер, така че трябва да се създаде <code>if</code>/<code>else if</code>/<code>else</code> верига.</p>
<p><a class="p_ident" id="p_Oma/sCzEw+" href="./02_program_structure.html#p_Oma/sCzEw+"></a>Втората версия на програмата има едно ясно и хитро решение. Най-простият начин е да се добави още една бримка на веригата за точно тестване на дадено състояние. Хитрия начин е изграждане на string съдържащ думата или думите на изхода и принтиране на тази дума или номер, ако потенциално няма дума, като използваме елегантно оператора <code>||</code>.</p>
</div></div>
<h3><a class="h_ident" id="h_5Hz2kiaaXp" href="./02_program_structure.html#h_5Hz2kiaaXp"></a>Chess board</h3>
<p><a class="p_ident" id="p_uH3DV6RVnV" href="./02_program_structure.html#p_uH3DV6RVnV"></a>Напишете програма, която създава string, който представлява 8 х 8 решетка, използвайки знаците за нов ред за отделяне на линии. На всяка позиция на решетката има интервал или “#”, те трябва да сформират шахматна дъска.</p>
<p><a class="p_ident" id="p_9kgrie1A2f" href="./02_program_structure.html#p_9kgrie1A2f"></a>Минавайки този <em>string</em> през <code>console.log</code> трябва да се покаже нещо такова:</p>
<pre> # # # #
# # # #
 # # # #
# # # #
 # # # #
# # # #
 # # # #
# # # #</pre>
<p><a class="p_ident" id="p_8n1E0bRGiW" href="./02_program_structure.html#p_8n1E0bRGiW"></a>Когато направите програмата, която генерира този модел, дефинирайте променлива <code>size = 8</code> и променете програмата, така че да работи за всички <code>size</code>, като извежда решетка за дадената ширина и височина.</p>
<pre data-language="javascript" class="snippet cm-s-default"><a class="c_ident" id="c_CfkOp8tkUe" href="./02_program_structure.html#c_CfkOp8tkUe"></a><span class="cm-comment">// Your code here.</span></pre>
<div class="solution"><div class="solution-text">
<p><a class="p_ident" id="p_+7IWmz4GNn" href="./02_program_structure.html#p_+7IWmz4GNn"></a><em>String</em> може да бъде изграден, като се започне с един празен (<code>""</code>) и многократно се добавят характери. Характера за нов ред се изписва <code>"\n"</code>.</p>
<p><a class="p_ident" id="p_d+ioCL2/4t" href="./02_program_structure.html#p_d+ioCL2/4t"></a>Използвайте <code>console.log</code> да инспектира изхода на вашата програма.</p>
<p><a class="p_ident" id="p_8UZmClB+c6" href="./02_program_structure.html#p_8UZmClB+c6"></a>За да работите в две измерения, ще ви трябват два вложени цикъла. Поставете фигурни скоби около телата на двата цикъла, за да се направи лесно видимо къде е началото и края. Опитайте се да направите правилно отстъпите на техните тела. Редът на циклите трябва да следва реда, по който се изгражда <em>string</em> (ред по ред, от ляво на дясно, от горе на долу). Така че, външният цикъл държи линиите, а вътрешния цикъл държи характерите за една линия.</p>
<p><a class="p_ident" id="p_rEz9p9ipPK" href="./02_program_structure.html#p_rEz9p9ipPK"></a>Ще имате нужда от две променливи, с които да следите напредъка. За да знаете дали да сложите празно пространство или знак за диез в дадена позиция, може да тествате дали сумата от двата брояча в циклите е четна (<code>% 2</code>).</p>
<p><a class="p_ident" id="p_9FaUCRZviB" href="./02_program_structure.html#p_9FaUCRZviB"></a>Прекратяване на ред чрез добавяне на характера за нов ред се случва, след като линията е изградена, така че трябва да направите това след вътрешния цикъл, но от вътрешната страна на външния цикъл.</p>
</div></div>
<nav>
  <a href="./01_values.html" title="previous chapter">◀</a>
  <a href="./index.html" title="cover">◆</a>
  <a href="./03_functions.html" title="next chapter">▶</a>
</nav>
</article>
</body></html>